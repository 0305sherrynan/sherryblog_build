import{d as L,r as u,y as E,c as n,e as f,f as v,j as d,i as t,x as s,C as i,K as F,V as N,p as j,l as M,k as S}from"./index-dd2ca572.js";import{s as D}from"./article-5c4a8d28.js";import{r as Y}from"./randomId-0019d5c4.js";import"./index-fc906e2e.js";const B=_=>(j("data-v-38d156ac"),_=_(),M(),_),H={class:"addarti-root"},O={class:"basicInfo"},P={class:"left-cover"},T=B(()=>d("span",null,"上传封面",-1)),K=[T],q=["src"],z={class:"right-form"},G={class:"vitalInfo"},J={class:"btn-box"},Q=L({__name:"AddNewArticle",setup(_){const y=u(),b=u(!1),m=u(),k=u(""),x=u(),o=E({title:"",description:"",time:"",info:"",sort:"请选择",cover:""}),h=async a=>{const e=a.target.files;e&&(b.value=!0,m.value=e[0],k.value=await URL.createObjectURL(m.value))},w=()=>{var a;(a=y.value)==null||a.click()},C=()=>{var a;(a=x.value)==null||a.resetFields(),o.info=""},V=async()=>{let a=new FileReader;m.value&&a.readAsDataURL(m.value),a.addEventListener("load",function(){var c;const e=(c=a.result)==null?void 0:c.toString().replace(/^data:image\/\w+;base64,/,"");o.cover=e,console.log(e)},!1),a.addEventListener("loadend",async function(){const e=F.xss.process(N.vMdParser.themeConfig.markdownParser.render(o.info));await D(Object.assign(o,{info:e,article_id:Y(-10)})),C()})};return(a,e)=>{const c=n("a-input"),p=n("a-form-item"),r=n("a-select-option"),U=n("a-select"),A=n("el-date-picker"),I=n("a-form"),R=n("v-md-editor"),g=n("a-button");return f(),v("div",H,[d("div",O,[d("div",P,[b.value?(f(),v("img",{key:1,src:k.value,alt:""},null,8,q)):(f(),v("div",{key:0,onClick:w},K)),d("input",{type:"file",name:"",id:"",accept:"image/*",ref_key:"fileRef",ref:y,style:{display:"none"},onChange:h},null,544)]),d("div",z,[t(I,{model:o,ref_key:"formRef",ref:x},{default:s(()=>[t(p,{label:"标题",name:"title"},{default:s(()=>[t(c,{type:"text",value:o.title,"onUpdate:value":e[0]||(e[0]=l=>o.title=l)},null,8,["value"])]),_:1}),t(p,{label:"简述",name:"description"},{default:s(()=>[t(c,{type:"text",value:o.description,"onUpdate:value":e[1]||(e[1]=l=>o.description=l)},null,8,["value"])]),_:1}),t(p,{label:"分类",name:"sort"},{default:s(()=>[t(U,{ref:"select",value:o.sort,"onUpdate:value":e[2]||(e[2]=l=>o.sort=l),style:{width:"120px"}},{default:s(()=>[t(r,{value:"html"},{default:s(()=>[i("html")]),_:1}),t(r,{value:"javascript"},{default:s(()=>[i("javascript")]),_:1}),t(r,{value:"css"},{default:s(()=>[i("css")]),_:1}),t(r,{value:"vue"},{default:s(()=>[i("vue")]),_:1}),t(r,{value:"leetcode"},{default:s(()=>[i("leetcode")]),_:1}),t(r,{value:"ts"},{default:s(()=>[i("ts")]),_:1})]),_:1},8,["value"])]),_:1}),t(p,{label:"时间",name:"time"},{default:s(()=>[t(A,{modelValue:o.time,"onUpdate:modelValue":e[3]||(e[3]=l=>o.time=l),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),d("div",G,[t(R,{modelValue:o.info,"onUpdate:modelValue":e[4]||(e[4]=l=>o.info=l),height:"400px"},null,8,["modelValue"])]),d("div",J,[t(g,{type:"primary",onClick:V},{default:s(()=>[i("提交")]),_:1}),t(g)])])}}});const ee=S(Q,[["__scopeId","data-v-38d156ac"]]);export{ee as default};
